<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Start here if this is your first time using biocroxytest! You will learn about     
basic usage.
">
<title>Introduction to biocroxytest • biocroxytest</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Introduction to biocroxytest">
<meta property="og:description" content="Start here if this is your first time using biocroxytest! You will learn about     
basic usage.
">
<meta property="og:image" content="https://xec-cm.github.io/biocroxytest/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">biocroxytest</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.99.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item">
  <a class="nav-link" href="../articles/biocroxytest.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/xec-cm/biocroxytest/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Introduction to biocroxytest</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/xec-cm/biocroxytest/blob/HEAD/vignettes/biocroxytest.Rmd" class="external-link"><code>vignettes/biocroxytest.Rmd</code></a></small>
      <div class="d-none name"><code>biocroxytest.Rmd</code></div>
    </div>

    
    
<style>
body {
text-align: justify}
</style>
<p><br></p>
<p>The <em><a href="https://github.com/xec-cm/biocroxytest" class="external-link">biocroxytest</a></em>
package is a novel tool that enhances the efficiency of test writing in
R, particularly for Bioconductor software packages. It leverages the
structure of <em><a href="https://github.com/r-lib/roxygen2" class="external-link">roxygen2</a></em> for test
writing, which improves readability, code organization, and integrates
seamlessly with package documentation.</p>
<p>In Bioconductor, daily tests are run as part of the nightly builds,
with a maximum limit of 40 minutes per package. For tests that exceed
this limit, developers can set up “long tests” and add their package to
the Bioconductor Long Tests builds. However, traditionally separating
tests and long tests can be cumbersome.</p>
<p><em><a href="https://github.com/xec-cm/biocroxytest" class="external-link">biocroxytest</a></em>
addresses this issue by introducing a new roclet,
<code>@longtests</code>, inspired by <em><a href="https://github.com/mikldk/roxytest" class="external-link">roxytest</a></em>. This allows
developers to document and store long tests directly within their <em><a href="https://github.com/r-lib/roxygen2" class="external-link">roxygen2</a></em> comments. By
using the <code>@longtests</code> roclet, extensive tests are run and
checked regularly without impacting the efficiency of the daily build
process.</p>
<p>The <code>@longtests</code> roclet provides a dedicated space for
extensive tests, ensuring they are easily accessible and
well-documented. This not only improves the package’s reliability but
also its maintainability. Thus, <em><a href="https://github.com/xec-cm/biocroxytest" class="external-link">biocroxytest</a></em>
contributes to the creation of robust, reliable, and efficient
Bioconductor packages.</p>
<p><br></p>
<div class="section level2">
<h2 id="biocroxytest-setup">biocroxytest setup<a class="anchor" aria-label="anchor" href="#biocroxytest-setup"></a>
</h2>
<p>Once the <em><a href="https://github.com/xec-cm/biocroxytest" class="external-link">biocroxytest</a></em>
package is installed, you need to carry out two steps to correctly set
up long tests in your package:</p>
<div class="section level4">
<h4 id="add-the-new-roclet-to-your-description-file">1 - Add the new roclet to your Description file<a class="anchor" aria-label="anchor" href="#add-the-new-roclet-to-your-description-file"></a>
</h4>
<p>You need to add <code><a href="../reference/longtests_roclet.html">biocroxytest::longtests_roclet</a></code> to the
Roxygen section of your Description file. This will enable
<code><a href="https://roxygen2.r-lib.org/reference/roxygenize.html" class="external-link">roxygen2::roxygenize()</a></code> to generate long tests from the
<code>@longtest</code> tag. Your Description file should have a line
similar to this:</p>
<pre><code><span><span class="va">Roxygen</span><span class="op">:</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>roclets <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"namespace"</span>, <span class="st">"rd"</span>, <span class="st">"biocroxytest::longtests_roclet"</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="section level4">
<h4 id="run-the-biocroxytestuse_longtests-function">2 - Run the <code>biocroxytest::use_longtests()</code> function<a class="anchor" aria-label="anchor" href="#run-the-biocroxytestuse_longtests-function"></a>
</h4>
<p>This function sets up the overall infrastructure for long tests. When
run, it creates the <code>longtests/testthat</code> directory and the
<code>longtests/testthat.R</code> file, which are necessary for storing
and running your long tests. Additionally, it generates a file named
<code>.BBSoptions</code> that contains the
<code>RunLongTests: TRUE</code> parameter, indicating that long tests
should be run on the Bioconductor servers.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create the longtests directory and .BBSoptions file</span></span>
<span><span class="fu">biocroxytest</span><span class="fu">::</span><span class="fu"><a href="../reference/use_longtests.html">use_longtests</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>With these two steps, your package will be set up to write, document,
and store long tests directly in your <em><a href="https://github.com/r-lib/roxygen2" class="external-link">roxygen2</a></em> comments,
improving the efficiency and organization of your test code.</p>
<p><br></p>
</div>
</div>
<div class="section level2">
<h2 id="basic-process">Basic Process<a class="anchor" aria-label="anchor" href="#basic-process"></a>
</h2>
<p>The <em><a href="https://github.com/xec-cm/biocroxytest" class="external-link">biocroxytest</a></em>
package allows you to add extensive tests to your functions using the
<code>@longtests</code> tag in your roxygen comments. Here’s a more
detailed explanation of how to use it:</p>
<div class="section level4">
<h4 id="add-the-longtests-tag-to-your-function-documentation">1 - Add the <code>@longtests</code> tag to your function
documentation<a class="anchor" aria-label="anchor" href="#add-the-longtests-tag-to-your-function-documentation"></a>
</h4>
<p>In your roxygen comments for each function, you can add a
<code>@longtests</code> tag followed by the tests you want to run. These
tests should be written as if they were in a
<code><a href="https://testthat.r-lib.org/reference/test_that.html" class="external-link">testthat::test_that()</a></code> call. For example:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#' A function to do x</span></span>
<span><span class="co">#' </span></span>
<span><span class="co">#' @param x A number</span></span>
<span><span class="co">#' </span></span>
<span><span class="co">#' @longtests </span></span>
<span><span class="co">#' expect_equal(foo(2), sqrt(2))</span></span>
<span><span class="co">#' expect_error(foo("a string"))</span></span>
<span><span class="co">#' </span></span>
<span><span class="co">#' @return something</span></span>
<span><span class="va">foo</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">sqrt</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>In this example, the function <code>foo()</code> has two long tests
associated with it: <code>expect_equal(foo(2),    sqrt(2))</code> and
<code>expect_error(foo("a string"))</code>.</p>
</div>
<div class="section level4">
<h4 id="run-roxygen2roxygenise">2 - Run <code>roxygen2::roxygenise()</code><a class="anchor" aria-label="anchor" href="#run-roxygen2roxygenise"></a>
</h4>
<p>After adding the <code>@longtests</code> tags to your functions, you
need to run <code><a href="https://roxygen2.r-lib.org/reference/roxygenize.html" class="external-link">roxygen2::roxygenise()</a></code>. This will generate a
new file in the <code>longtests/testthat</code> directory for each R
script that contains functions with <code>@longtests</code> tags. The
generated files will contain <code><a href="https://testthat.r-lib.org/reference/test_that.html" class="external-link">testthat::test_that()</a></code> calls
for each set of long tests.</p>
<p>For instance, if you have the <code>foo()</code> function in a file
named <code>R/functions.R</code>, <code><a href="https://roxygen2.r-lib.org/reference/roxygenize.html" class="external-link">roxygen2::roxygenise()</a></code>
will generate a file named
<code>longtests/test-biocroxytest-tests-functions.R</code> with the
following content:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Generated by biocroxytest: do not edit by hand!</span></span>
<span></span>
<span><span class="co"># File R/functions.R: @longtests</span></span>
<span></span>
<span><span class="fu">testthat</span><span class="fu">::</span><span class="fu"><a href="https://testthat.r-lib.org/reference/test_that.html" class="external-link">test_that</a></span><span class="op">(</span><span class="st">"Function foo() @ L11"</span>, <span class="op">{</span></span>
<span>  <span class="fu">testthat</span><span class="fu">::</span><span class="fu"><a href="https://testthat.r-lib.org/reference/equality-expectations.html" class="external-link">expect_equal</a></span><span class="op">(</span><span class="fu">foo</span><span class="op">(</span><span class="fl">2</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">sqrt</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="fu">testthat</span><span class="fu">::</span><span class="fu"><a href="https://testthat.r-lib.org/reference/expect_error.html" class="external-link">expect_error</a></span><span class="op">(</span><span class="fu">foo</span><span class="op">(</span><span class="st">"a string"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span><span class="op">)</span></span></code></pre></div>
<p>This file contains the long tests for the <code>foo()</code>
function, ready to be run by <em><a href="https://github.com/r-lib/testthat" class="external-link">testthat</a></em>.</p>
<p><br></p>
</div>
</div>
<div class="section level2">
<h2 id="session-info">Session info<a class="anchor" aria-label="anchor" href="#session-info"></a>
</h2>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">utils</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/utils/sessionInfo.html" class="external-link">sessionInfo</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; R Under development (unstable) (2024-01-09 r85796)</span></span>
<span><span class="co">#&gt; Platform: x86_64-pc-linux-gnu</span></span>
<span><span class="co">#&gt; Running under: Ubuntu 22.04.3 LTS</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Matrix products: default</span></span>
<span><span class="co">#&gt; BLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3 </span></span>
<span><span class="co">#&gt; LAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so;  LAPACK version 3.10.0</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; locale:</span></span>
<span><span class="co">#&gt;  [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              </span></span>
<span><span class="co">#&gt;  [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    </span></span>
<span><span class="co">#&gt;  [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   </span></span>
<span><span class="co">#&gt;  [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 </span></span>
<span><span class="co">#&gt;  [9] LC_ADDRESS=C               LC_TELEPHONE=C            </span></span>
<span><span class="co">#&gt; [11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; time zone: UTC</span></span>
<span><span class="co">#&gt; tzcode source: system (glibc)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; attached base packages:</span></span>
<span><span class="co">#&gt; [1] stats     graphics  grDevices utils     datasets  methods   base     </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; loaded via a namespace (and not attached):</span></span>
<span><span class="co">#&gt;  [1] BiocStyle_2.31.0    jsonlite_1.8.8      compiler_4.4.0     </span></span>
<span><span class="co">#&gt;  [4] BiocManager_1.30.22 brio_1.1.4          xml2_1.3.6         </span></span>
<span><span class="co">#&gt;  [7] stringr_1.5.1       jquerylib_0.1.4     systemfonts_1.0.5  </span></span>
<span><span class="co">#&gt; [10] textshaping_0.3.7   yaml_2.3.8          fastmap_1.1.1      </span></span>
<span><span class="co">#&gt; [13] R6_2.5.1            knitr_1.45          desc_1.4.3         </span></span>
<span><span class="co">#&gt; [16] rprojroot_2.0.4     pillar_1.9.0        bslib_0.6.1        </span></span>
<span><span class="co">#&gt; [19] rlang_1.1.3         utf8_1.2.4          testthat_3.2.1     </span></span>
<span><span class="co">#&gt; [22] biocroxytest_0.99.0 cachem_1.0.8        stringi_1.8.3      </span></span>
<span><span class="co">#&gt; [25] roxygen2_7.3.0      xfun_0.41           fs_1.6.3           </span></span>
<span><span class="co">#&gt; [28] sass_0.4.8          pkgload_1.3.4       memoise_2.0.1      </span></span>
<span><span class="co">#&gt; [31] cli_3.6.2           pkgdown_2.0.7.9000  withr_3.0.0        </span></span>
<span><span class="co">#&gt; [34] magrittr_2.0.3      digest_0.6.34       lifecycle_1.0.4    </span></span>
<span><span class="co">#&gt; [37] waldo_0.5.2         vctrs_0.6.5         evaluate_0.23      </span></span>
<span><span class="co">#&gt; [40] glue_1.7.0          ragg_1.2.7          fansi_1.0.6        </span></span>
<span><span class="co">#&gt; [43] rmarkdown_2.25      purrr_1.0.2         tools_4.4.0        </span></span>
<span><span class="co">#&gt; [46] htmltools_0.5.7</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Francesc Catala-Moll.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.9000.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
